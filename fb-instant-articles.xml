<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title></title>
    <link>https://fascinations.hannanali.tech</link>
    <description>
      Blog where Hannan shares his thoughts about things he find fascinating. 
    </description>
    
        
            <item>
                <title>Purge cache after Jekyll build using Travis CI</title>
                <link>https://fascinations.hannanali.tech/programming/people/education/cs/2017/01/30/purge/</link>
                <content:encoded>
                    <![CDATA[
                    <p class="center lightbox"><a href="https://www.cloudflare.com/img/logo-cloudflare-dark.svg">
    <img src="https://www.cloudflare.com/img/logo-cloudflare-dark.svg" alt="Cloudflare Logo" width="360px" heigh="240px" />
</a></p>

<p>I use <a href="https://www.cloudflare.com/cdn/">Cloudflare’s CDN</a> for this site, as it’s very easy to setup and also has a free plan, which is just
right for my usage, as I want to deliver this site as fast as possible to the users, and it reduces my
actual bandwidth usage on <a href="https://firebase.com">Firebase</a> which is quite limited on the Free Tier <strong>(10 GB/Month)</strong></p>

<!--Information about my Usecase and how I wanted to solve the problem -->
<p>A usecase occured where I was publishing major changes to my jekyll blog very frequently, Cloudflare’s CDN
wasn’t getting revalidated each time, I did a <code class="highlighter-rouge">jekyll build</code> using <code class="highlighter-rouge">TravisCI</code> which was leading to inconsidtent
user experience as the content previously cached on the CDN wasn’t getting invalidated.</p>

<h2 id="cloudflares-purging-options">Cloudflare’s Purging Options</h2>

<p>Luckily Cloudflare offers, nice options to purge the content from the CDN. Cloudflare offers
<a href="https://support.cloudflare.com/hc/en-us/articles/200169246-How-do-I-purge-my-cache-">various options</a>
 in order to purge the cache.</p>

<p>On a free plan, I could’ve either purged the entire cache, or purge individual files by url.</p>

<p>Purging entire cache was never an option, as I not only use this domain for my Blog, but also for Github Pages, Portfolio, and some other random things, I don’t even remember about right now.</p>

<p>After considering the two options, I went for Purging by Individual files, however, doing it all through the UI, every single time, would
be quite hard for me to do.</p>

<h2 id="cloudflare-api-and-nodejs-client">Cloudflare API and Node.js Client</h2>

<p><a href="https://api.cloudflare.com/">Cloudflare API</a>
exposes the entire interface of Cloudflare, including Purging. In order to purge files individually, we 
can pass it an array of file URLs <em>(upto 30 in a request)</em>.</p>

<p>Cloudflare also has an easy to use <a href="https://www.npmjs.com/package/cloudflare">node.js client</a>, which I used to do something cool,
we are going to talk about next.</p>

<h2 id="writing-a-script-to-purge-using-cloudfares-nodejs-client">Writing a script to purge using Cloudfare’s Node.js client</h2>

<p>Afterwards, I just wrote a simple script that parsed the URLs present in the <code class="highlighter-rouge">sitemap.xml</code> of build folder
<code class="highlighter-rouge">(_site)</code> using node library <code class="highlighter-rouge">xml2js</code>. Cloudflare had a limit of upto 30 URLs that can be purged in one request <em>(which might be there to protect from misuse)</em> , in order to solve this problem, we returned multiple promisified calls to <code class="highlighter-rouge">Zone.deleteCache</code> of URLs chunked into array at max 30 urls and resolved them all using <code class="highlighter-rouge">Promise.all</code> function.</p>

<p>You can take a look at the scripts I wrote for purging by going to <a href="https://github.com/abdulhannanali/fascinations-of-hannan/tree/master/scripts/purger">scripts/purger</a> directory in this blog’s repository. <a href="https://github.com/abdulhannanali/fascinations-of-hannan/blob/master/scripts/purger/index.js">purger/index.js</a> is the main file initiated to purge the URLs from Cloudflare.</p>

<h3 id="automating-script-purging-task-using-traviscihttpstravis-ciorg">Automating script purging task using <a href="https://travis-ci.org">TravisCI</a></h3>

<p class="lightbox"><a href="https://cdn.travis-ci.org/images/logos/TravisCI-Mascot-1-20feeadb48fc2492ba741d89cb5a5c8a.png">
    <img src="https://cdn.travis-ci.org/images/logos/TravisCI-Mascot-1-20feeadb48fc2492ba741d89cb5a5c8a.png" width="140px" height="140px" style="float:left; margin: 10px;" />
</a></p>

<p>Doing a build and deploying it to two environments production and staging, none of these tasks are handled by me, but by <a href="https://travis-ci.org"><strong>Travis the builder</strong></a>. This is quite a mundane task, and will save hours in the long run if properly automated.</p>

<p>After the deploy is succeeded to the <code class="highlighter-rouge">master</code> branch successfully, <code class="highlighter-rouge">scripts/purger/index.js</code> is initiated using this simple command</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>node --harmony_async_await scripts/purger/index.js
</code></pre>
</div>

<blockquote>
  <p><em>Note: <code class="highlighter-rouge">--harmony_async_await</code> flag is only there as <code class="highlighter-rouge">async/await</code> is not a stable feature in Node.js as of <code class="highlighter-rouge">v7.4.0</code>, refrain from using it in server side production code, right now</em></p>
</blockquote>

<p>This purge task needs to be run only in <code class="highlighter-rouge">master</code>, as I don’t have Cloudflare CDN set up for the domains running in staging environment, such as “surge.sh”, and “Github Pages”, so we run this command after the deploy to firebase succeeds within the <code class="highlighter-rouge">"TRAVIS_BRANCH" == "master"</code> condition in <code class="highlighter-rouge">deploy.sh</code>.</p>

<h4 id="power-of-travisci-and-cloudflare">Power of TravisCI and Cloudflare</h4>

<p>Here’s to show the power of what you can achieve using Cloudflare’s Powerful API and the customization Travis CI provides you in your 
build environment.</p>

<p>I hope you learned about extent to which you can customize and control your Jekyll build environment, through tools such as <a href="https://travis-ci.org">TravisCI</a> and also discover how easy
it is to use Cloudflare’s API to do tasks, that might take a lot of time otherwise, if done manually from the Cloudflare’s UI. :heart:</p>

<blockquote class="blue">
  <p>If you found this post helpful, please give it a Like :thumbsup: . I am looking forward to hear what you have to say on this topic, do post a comment below. :heart: :tada:</p>
</blockquote>

                    ]]>
                </content:encoded>
                <guid isPermaLink="false">/programming/people/education/cs/2017/01/30/purge/</guid>
                <description>
                    
                    Purging Cache using Cloudflare after building Jekyll saves me from purging everything, and not buy the tag feature
                    
                </description>
                <pubDate>Mon, 30 Jan 2017 00:00:00 +0000</pubDate>
                <author>Hannan Ali</author>
            </item>
        
    
        
            <item>
                <title>Improving lives through CS and coding</title>
                <link>https://fascinations.hannanali.tech/programming/people/education/cs/2017/01/27/Code-index/</link>
                <content:encoded>
                    <![CDATA[
                    <p class="lightbox center"><a href="/images/coding.jpg" title="">
    <img src="/images/coding.jpg" alt="Coding might be the closest thing we have to superpower" title="" />
</a></p>

<h2 id="coding-gives-us-wings">Coding gives us wings</h2>

<p>Programming holds the power to revoutionize our lives and the way we think, interact and make. It not only
holds intrinsic but is a highly rewarding skills, as you get to write and determine how the current
and future world works.</p>

<p>With automation coming in place, there are not going to be as many manual labor jobs, jobs which many people
have relied on for maybe centuries, but majority of the world isn’t ready for this upcoming time. 
As a human, it’s my responsibility to enable more people to learn these skills, so they can improve and
impact the lives of others in a better way.</p>

<h3 id="initiatives-and-the-communication-gap">Initiatives and the communication gap</h3>

<p>Despite having all amazing global initatives such as <a href="https://code.org">Code.org</a>, 
<a href="https://khanacademy.org">KhanAcademy</a>
, and countless others websites offering quality education on CS topics such as <a href="https://udacity.com">Udacity</a> there 
is still a big gap that’s not being covered, people here are not getting oriented into that CS Learning mindset.</p>

<p>There’s definitely lack of resources, people are still struggling in developing countries, to fulfill their
basic needs, but there’s a lack of awareness here too, for people with resources.</p>

<p>The reason behind this mainly comes to our treatment of Computer Science Education locally, and even though
initiatives are being started by various groups and some cool indviduals in Pakistan, we
still need to come together and rethink how much we emphasize the role of technology in our daily lives
and do more effort to give this superpower to more people.</p>

<h3 id="activities-at-the-local-level">Activities at the local level</h3>

<p>Improving the state of CS education, requires us to increase our activities at the local level, wherever
we are cos, this still might be the best way to reach people who otherwise won’t ever think of this, even
though value of CS Education and Skills is going to be very <strong>apparent</strong> in the future.</p>

<p>If you’re a high schooler start a <strong><a href="https://hackclub.com">Hack Club</a></strong> in your high school, 
HackClub allows the students to participate
in practical CS learning and project making which is a great activity on it’s own, or to start
with, you can organize an <strong><a href="https://code.org/learn">Hour of Code</a></strong>. These initiatives not only are a nice 
community activity, but can also be a way to empower people with resources who can’t afford them.</p>

<h3 id="encouraging-women-to-code">Encouraging Women to code</h3>

<p>Women can play a big role in the future advances in the technology sector, and we should make our efforts,
keeping this in mind, encouraging them at every level, programs catered especially towards women can play
a huge role, the state of women in tech and who code in Pakistan, is not quite good as of now, as there a lot of problems that women face in Pakistan, which owe a separate post of it’s own, this can definitely be improved
if we focus on the number of women we are reaching out to and increase the effort if it’s low. Programs 
such as <a href="https://schoolofskills.co/sheskills/">SheSkills</a> even though not all coding, are highly encouraging,
and I would also like to get involved in one such effort in the future.</p>

<blockquote class="green">
  <p>If you have any feedback, on steps we can take to improve state of CS Education in Pakistan and all over  the world, as well as any questions or concern, do share a comment below, I am very interested to hear from everyone. Thanks a lot for reading this.</p>
</blockquote>

<blockquote class="blue">
  <p>If you found this helpful, do like and share it, so our voice can reach to more people. :heart:
<img src="https://i.imgur.com/wgxtdRy.png" alt="Instructions to like the post" /></p>
</blockquote>

                    ]]>
                </content:encoded>
                <guid isPermaLink="false">/programming/people/education/cs/2017/01/27/Code-index/</guid>
                <description>
                    
                    This post highlights the importance of Computer Science Education and how we can do more to get more people to code, create cool things and be ready for the exciting future.
                    
                </description>
                <pubDate>Fri, 27 Jan 2017 00:00:00 +0000</pubDate>
                <author>Hannan Ali</author>
            </item>
        
    
        
            <item>
                <title>Setting up Travis CI for Jekyll to build and deploy</title>
                <link>https://fascinations.hannanali.tech/travis/ci/technology/2017/01/26/travis-ci-index/</link>
                <content:encoded>
                    <![CDATA[
                    <p class="center"><a href="https://travis-ci.org"><img src="/images/travis-mascot.png" alt="TravisCI Mascot" /></a></p>

<p>I just set up first ever Continuous Integration Build Process using <a href="https://travis-ci.org">TravisCI</a>,
TravisCI, is pretty cool, super simple, and a joy to use. This build process was setup for this very blog,
in order to save me hassle of rebuilding the whole blog manually and then deploying it manually too.
Life was never so fun.</p>

<h3 id="heres-my-build-file-though">Here’s my build file though</h3>
<div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="s">rvm</span><span class="pi">:</span>
 <span class="pi">-</span> <span class="s">2.3.3</span>
 <span class="pi">-</span> <span class="s">2.2</span>
<span class="s">before_install</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bash ./scripts/nvm.sh</span>
    <span class="pi">-</span> <span class="s">npm install -g surge</span>
    <span class="pi">-</span> <span class="s">npm install -g firebase-tools</span>
<span class="s">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">./scripts/cibuild.sh</span>
<span class="s">after_success</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">./scripts/deploy.sh</span>

<span class="s">branches</span><span class="pi">:</span>
    <span class="s">except</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">gh-pages</span>
</code></pre>
</div>

<p>You might have noticed paths to bash scripts, majority of what TravisCI does for this blog is located 
in these scripts. You can checkout all the bash scripts in the <a href="https://github.com/abdulhannanali/fascinations-of-hannan/tree/travis-ci-post/scripts">scripts/</a>
directory of this blog’s Github Repository.</p>

                    ]]>
                </content:encoded>
                <guid isPermaLink="false">/travis/ci/technology/2017/01/26/travis-ci-index/</guid>
                <description>
                    
                    I write about my experience with TravisCI and my first TravisCI file
                    
                </description>
                <pubDate>Thu, 26 Jan 2017 00:00:00 +0000</pubDate>
                <author>Hannan Ali</author>
            </item>
        
    
  </channel>
</rss>
